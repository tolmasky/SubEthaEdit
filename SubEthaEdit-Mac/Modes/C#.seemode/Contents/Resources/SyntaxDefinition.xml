<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE syntax SYSTEM "syntax.dtd">
<syntax>

    <head>
        <name>C#</name> <!-- The definitions title -->
        <charsintokens><![CDATA[_0987654321abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ@]]></charsintokens> <!-- Valid Characters for Variables -->
        <!-- <charsdelimitingtokens></charsdelimitingtokens> -->
    </head>

    <states>
        <default id="Base" scope="meta.default">

            <keywords id="FunctionRegex" useforautocomplete="no" scope="language.subroutine.function">
				<regex>([A-Za-z0-9_]+ *)\(</regex>
            </keywords>

            <!-- https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/ -->
            <keywords id="C# Keywords" useforautocomplete="yes" scope="keyword">
                <string>abstract</string>
                <string>as</string>
                <string>base</string>
                <string>bool</string>
                <string>break</string>
                <string>byte</string>
                <string>case</string>
                <string>catch</string>
                <string>char</string>
                <string>checked</string>
                <string>class</string>
                <string>const</string>
                <string>continue</string>
                <string>decimal</string>
                <string>default</string>
                <string>delegate</string>
                <string>do</string>
                <string>double</string>
                <string>else</string>
                <string>enum</string>
                <string>event</string>
                <string>explicit</string>
                <string>extern</string>
                <string>false</string>
                <string>finally</string>
                <string>fixed</string>
                <string>float</string>
                <string>for</string>
                <string>foreach</string>
                <string>goto</string>
                <string>if</string>
                <string>implicit</string>
                <string>in</string>
                <string>int</string>
                <string>interface</string>
                <string>internal</string>
                <string>is</string>
                <string>lock</string>
                <string>long</string>
                <string>namespace</string>
                <string>new</string>
                <string>null</string>
                <string>object</string>
                <string>operator</string>
                <string>out</string>
                <string>override</string>
                <string>params</string>
                <string>private</string>
                <string>protected</string>
                <string>public</string>
                <string>readonly</string>
                <string>ref</string>
                <string>return</string>
                <string>sbyte</string>
                <string>sealed</string>
                <string>short</string>
                <string>sizeof</string>
                <string>stackalloc</string>
                <string>static</string>
                <string>string</string>
                <string>struct</string>
                <string>switch</string>
                <string>this</string>
                <string>throw</string>
                <string>true</string>
                <string>try</string>
                <string>typeof</string>
                <string>uint</string>
                <string>ulong</string>
                <string>unchecked</string>
                <string>unsafe</string>
                <string>ushort</string>
                <string>using</string>
                <string>using static</string>
                <string>virtual</string>
                <string>void</string>
                <string>volatile</string>
                <string>while</string>
            </keywords>
            
            <!-- These should only be highlighteed in certain contexts, for now
                 though, do so unconditionally -->
            <keywords id="C# Contextual Keywords" useforautocomplete="yes" scope="keyword">
                <string>add</string>
                <string>alias</string>
                <string>ascending</string>
                <string>async</string>
                <string>await</string>
                <string>by</string>
                <string>descending</string>
                <string>dynamic</string>
                <string>equals</string>
                <string>from</string>
                <string>get</string>
                <string>global</string>
                <string>group</string>
                <string>into</string>
                <string>join</string>
                <string>let</string>
                <string>nameof</string>
                <string>on</string>
                <string>orderby</string>
                <string>partial</string>
                <string>partial</string>
                <string>remove</string>
                <string>select</string>
                <string>set</string>
                <string>value</string>
                <string>var</string>
                <string>when</string>
                <string>where</string>
                <string>yield</string>      
            </keywords>
            
            <keywords id="Numbers" useforautocomplete="no" scope="language.constant.numeric">
				<regex>(?&lt;![\w\d_])((?:[+-]?(?:(?:[0-9]+\.[0-9]*)|(?:\.[0-9]+))(?:[eE][+\-]?[0-9]+)?[fFlL]?)|(?:(?:(?:[1-9][0-9]*)|0[0-7]*|(?:0[xX][0-9a-fA-F]+))(?:(?:[uU][lL]?)|(?:[lL][uU]?))?))(?![\w\d_])</regex>
            </keywords>

            <state id="Characters" scope="language.constant.numeric.character">
                <begin><regex>'(?=\\?.')</regex></begin>
                <end><regex>(\\'')|(.')</regex></end>
            </state>
    
            <state id="Preprocessor" scope="language.preprocessor">
                <begin><regex>#</regex></begin>
                <end><regex>(?&lt;![\\])[\n\r]</regex></end>
                <keywords id="Numbers" useforautocomplete="no" scope="language.constant.numeric.preprocessor">
                    <regex>(?&lt;=[^\w\d]|^)(([+-]?(([0-9]+\.[0-9]*)|(\.[0-9]+))([eE][+\-]?[0-9]+)?[fFlL]?)|((([1-9][0-9]*)|0[0-7]*|(0[xX][0-9a-fA-F]+))(([uU][lL]?)|([lL][uU]?))?))(?=[^\w\d]|$)</regex>
                </keywords>
                <keywords id="AnglePathInPreprocessor" type="string" scope="string.angle.preprocessor">
                    <regex>(&lt;[-\w_\.]+(?:/[-\w_\.]+)*>)</regex>
                </keywords>
                <state-link state="Comment"/>
                <state id="String in Preprocessor" type="string" foldable="no" scope="string.double.preprocessor">
                    <begin><regex>"</regex></begin>
                    <end><regex>((?&lt;!\\)(\\\\)*)"</regex></end>
                </state>
                <state id="SingleComment in Preprocessor" type="comment" scope="comment.line.double-slash">
                    <begin><regex>//</regex></begin>
                    <end><regex>.(?=[\n\r])</regex></end>
                    <import mode="Base" state="EmailAndURLContainerState" keywords-only="yes"/>
                </state>
            </state>
    
            <state id="DoxyGen Comment" type="comment" scope="comment.block.documentation">
                <begin><regex>/\*[\*\!]</regex><autoend>\*/</autoend></begin>
                <end><regex>\*/</regex></end>
                <keywords id="DoxyGen Tags" useforautocomplete="no" scope="comment.block.documentation.tag">
                    <regex>(?&lt;=[^\w\d]|^)([@\\]\w+)</regex>
                </keywords>
                <import mode="Base" state="EmailAndURLContainerState" keywords-only="yes"/>
            </state>
    
            <state id="AutodocComment" type="comment" scope="comment.block.documentation">
                <begin><regex>/\*"</regex><autoend>"\*/</autoend></begin>
                <end><regex>\*/</regex></end>
                <import mode="Base" state="EmailAndURLContainerState" keywords-only="yes"/>
            </state>
    
            <state id="Comment" type="comment" scope="comment.block">
                <begin><regex>/\*</regex><autoend>\*/</autoend></begin>
                <end><regex>\*/</regex></end>
                <import mode="Base" state="EmailAndURLContainerState" keywords-only="yes"/>
           </state>
            
            <state id="SingleComment" type="comment" scope="comment.line.double-slash">
                <begin><regex>//</regex></begin>
                <end><regex>(?&lt;!\\)[\n\r]</regex></end>
                <import mode="Base" state="EmailAndURLContainerState" keywords-only="yes"/>
            </state>
            
            <state id="String" type="string" foldable="no" scope="string.double">
                <begin><regex>"</regex></begin>
                <end><regex>((?&lt;!\\)(\\\\)*)"</regex></end>
            </state>

            <state id="Block" type="block" foldable="yes" indent="yes" scope="meta.block.curly">
                <begin><regex>{</regex><autoend>}</autoend></begin>
                <end><regex>}</regex></end>
                <import/>
            </state>
            
        </default>
    </states>
</syntax>
